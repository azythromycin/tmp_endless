@tailwind base;
@tailwind components;
@tailwind utilities;

/* Neon accent colors - preserved in both themes */
:root {
  --neon-fuchsia: #d946ef;
  --neon-cyan: #22d3ee;
  --neon-emerald: #34d399;
  --neon-indigo: #818cf8;
  --neon-purple: #a855f7;
}

/* Light mode (default) */
:root,
html.light,
[data-theme="light"] {
  color-scheme: light;
  --bg-primary: #f8fafc;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f1f5f9;
  --bg-card: #ffffff;
  --bg-muted: #e2e8f0;
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: #cbd5e1;
  --glow-opacity: 0.12;
}

/* Dark mode */
html.dark,
[data-theme="dark"] {
  color-scheme: dark;
  --bg-primary: #020617;
  --bg-secondary: #0f172a;
  --bg-tertiary: #1e293b;
  --bg-card: rgba(15, 23, 42, 0.8);
  --bg-muted: #1e293b;
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --border-color: rgba(255, 255, 255, 0.1);
  --glow-opacity: 0.4;
}

@layer base {
  html, body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
  }
}

@layer components {
  /* Theme-aware card with preserved neon glow */
  .card {
    @apply rounded-2xl shadow-card p-6 transition-all;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
  }

  .card-glow {
    position: relative;
    overflow: hidden;
  }

  .card-glow::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 0%, var(--neon-fuchsia), transparent 60%);
    opacity: var(--glow-opacity);
    pointer-events: none;
  }

  .kpi {
    @apply card p-5 flex flex-col gap-1 hover:shadow-elevate transition-shadow duration-200;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400 focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
    border: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .btn:hover {
    background-color: var(--bg-muted);
  }

  .btn-primary {
    @apply btn bg-brand-500 text-white border-transparent hover:bg-brand-600 hover:shadow-md active:scale-[0.98];
  }

  .btn-secondary {
    @apply btn;
    background-color: var(--bg-secondary);
  }

  .btn-secondary:hover {
    background-color: var(--bg-tertiary);
  }

  /* Neon accent button */
  .btn-neon {
    @apply btn text-white;
    background: linear-gradient(135deg, var(--neon-fuchsia), var(--neon-indigo));
    border: none;
    box-shadow: 0 0 20px color-mix(in srgb, var(--neon-fuchsia) 50%, transparent);
  }

  .btn-neon:hover {
    box-shadow: 0 0 30px color-mix(in srgb, var(--neon-fuchsia) 70%, transparent);
    transform: translateY(-1px);
  }

  .input {
    @apply w-full rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent transition-all duration-200;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .input::placeholder {
    color: var(--text-muted);
  }

  .label {
    @apply block text-sm font-medium mb-1.5;
    color: var(--text-secondary);
  }

  .table {
    @apply w-full text-sm;
  }

  .table thead th {
    @apply text-left font-semibold pb-3 px-4;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border-color);
  }

  .table tbody tr {
    border-bottom: 1px solid var(--border-color);
    transition: background-color 150ms;
  }

  .table tbody tr:hover {
    background-color: var(--bg-muted);
  }

  .table tbody td {
    @apply px-4 py-3;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .skeleton {
    @apply animate-pulse rounded-lg;
    background: linear-gradient(90deg, var(--bg-muted), var(--bg-tertiary), var(--bg-muted));
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Neon text accents - preserved in both themes */
  .text-neon-fuchsia { color: var(--neon-fuchsia); }
  .text-neon-cyan { color: var(--neon-cyan); }
  .text-neon-emerald { color: var(--neon-emerald); }
  .text-neon-indigo { color: var(--neon-indigo); }
  .text-neon-purple { color: var(--neon-purple); }

  /* Neon glow effects */
  .glow-fuchsia {
    text-shadow: 0 0 20px var(--neon-fuchsia);
  }

  .glow-cyan {
    text-shadow: 0 0 20px var(--neon-cyan);
  }

  .glow-emerald {
    text-shadow: 0 0 20px var(--neon-emerald);
  }

  /* Theme-aware surfaces */
  .surface {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
  }

  .surface-elevated {
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* Gradient text that works in both themes */
  .text-gradient-neon {
    background: linear-gradient(135deg, var(--neon-fuchsia), var(--neon-cyan));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}
